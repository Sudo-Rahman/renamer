<script lang="ts">

    import {Button} from "$lib/components/ui/button";
    import {getUrl, getOs, getArch} from "./utils";
    import {t} from "$lib/translations";
    import {onMount} from "svelte";


    // get os type
    let os: 'linux' | 'macos' | 'windows' = $state("windows");
    let url: string = $state("");

    onMount(() => {
        // update os type on mount
        os = getOs();
        url = getUrl(os, getArch());
    });


</script>


<Button class="flex w-full" href={url}>

    {#if os === 'macos'}
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 24 24"
             style="fill:#FFFFFF;">
            <path d="M 15.904297 1.078125 C 15.843359 1.06875 15.774219 1.0746094 15.699219 1.0996094 C 14.699219 1.2996094 13.600391 1.8996094 12.900391 2.5996094 C 12.300391 3.1996094 11.800781 4.1996094 11.800781 5.0996094 C 11.800781 5.2996094 11.999219 5.5 12.199219 5.5 C 13.299219 5.4 14.399609 4.7996094 15.099609 4.0996094 C 15.699609 3.2996094 16.199219 2.4 16.199219 1.5 C 16.199219 1.275 16.087109 1.10625 15.904297 1.078125 z M 16.199219 5.4003906 C 14.399219 5.4003906 13.600391 6.5 12.400391 6.5 C 11.100391 6.5 9.9003906 5.5 8.4003906 5.5 C 6.3003906 5.5 3.0996094 7.4996094 3.0996094 12.099609 C 2.9996094 16.299609 6.8 21 9 21 C 10.3 21 10.600391 20.199219 12.400391 20.199219 C 14.200391 20.199219 14.600391 21 15.900391 21 C 17.400391 21 18.500391 19.399609 19.400391 18.099609 C 19.800391 17.399609 20.100391 17.000391 20.400391 16.400391 C 20.600391 16.000391 20.4 15.600391 20 15.400391 C 17.4 14.100391 16.900781 9.9003906 19.800781 8.4003906 C 20.300781 8.1003906 20.4 7.4992188 20 7.1992188 C 18.9 6.1992187 17.299219 5.4003906 16.199219 5.4003906 z"></path>
        </svg>
    {:else if os === 'windows'}
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48"
             style="fill:#FFFFFF;">
            <path d="M20.5 6h-12C7.122 6 6 7.122 6 8.5v12C6 21.878 7.122 23 8.5 23h12c1.378 0 2.5-1.122 2.5-2.5v-12C23 7.122 21.878 6 20.5 6zM39.5 6h-12C26.122 6 25 7.122 25 8.5v12c0 1.378 1.122 2.5 2.5 2.5h12c1.378 0 2.5-1.122 2.5-2.5v-12C42 7.122 40.878 6 39.5 6zM20.5 25h-12C7.122 25 6 26.122 6 27.5v12C6 40.878 7.122 42 8.5 42h12c1.378 0 2.5-1.122 2.5-2.5v-12C23 26.122 21.878 25 20.5 25zM39.5 25h-12c-1.378 0-2.5 1.122-2.5 2.5v12c0 1.378 1.122 2.5 2.5 2.5h12c1.378 0 2.5-1.122 2.5-2.5v-12C42 26.122 40.878 25 39.5 25z"></path>
        </svg>
    {:else if os === 'linux'}
        <img class="w-full p-1 h-full"
             src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEXElEQVR4nNWaaYhWZRTH77iNjTqatmjuGpUZEWYqqPnBjRRDJhU0FE1T+hD2YdJo+6SICy5hKq64JQVakFYo4hdXStBcQgyVUj+kuFW0qb843XOZp3fe+849z9xX3/uHl3eYuWf5P895znPOuRMEKQMoAwYDVcBU4EmgCdBV/yY/lwWlCuAB4HXgBLXxI7ATOAUcBS4Cy4EXS4YUIYFZwBX8cBqYBLwCjAMa3w8Sw3V108QqCcN7ReBZYBtwx+DgbeBawmf/BJYBFcUk0S+BQyeB14AeQFugoSNfoQsxHvgM+K2AngNAy2KQGAT8WsDwD3rgGxl0NgPeA36P0fkt0DpNEn2AWzHGvgHGAj19sxDwDHAmRv9BSdtpkGgInIsxsrTeBmrsPAJ8H2NnSRoGFsXcDXIO2qXCosZWu5hMKImlj4/Ch/S7TZ743VmUQ/j/hCJZLhd7AiuAEfr9bo4ySYsNzArTiYK/gad8lE3VnB5h7b0qKYBWwA3H9khgIdDJqqgR8JOj6Ev3PvBwTIrFp4Enkl50hI5H2AG0B7pbjLbQ6jXCz3JWPAkMAHYB/+jCyCV3BPgE6JUg5bsYkJiIHGKgC7DXUXDK51wA72tofpwb20Bz4GVgYAH5MifR/AWMBh5LaryBPJxTR03wIPEqcAnonSCEYy87wrLf3ZHyxOcUeMMRPmM9G8DzwGW56S1y+QCsc3x5J7BAYzrCmybhUF7OQLVVLh+ANY4vswMLtCqN8IJR9jlNmxVFIHLWKrzJEe5glN0AbPdweEi+2Ae2OL7M9yVy19p6anqdYzIYyjWN+f1u9UWyX3+r0s0qfMXDIWmqVlvlCujb5lzI5b5ETngYPiQlv1Gmcb6dJ7xHLqgvHwKVVme2qvB+k2DNIkhx1zzh8xU6B6t14QKj1A9phx80V9zOdh42CYayk1V2ukGmVcxddFd1LSt0jpIQOWYSDGVbA7/oWakV07qy06U1rkPPNPVhsdRkljmAq2S5kykqjaW3EHlL5ReZjQf/6ZFh3R9q395/5BR7ESYZ5ITEGOBh6bE1NKqNs4FZWudd1ZGqd+sQrUiE8R43+0CdXc1VHetlsFCH3ETgO33+vPQu3gQcpY87RLZ4yMvK9gZmaKxLCX4T+Ah4CeimHyE8R1O24I52obY0W4czUXd4uh46emiJsRL4WuM+HyQ5rEhlF+oo1mb4Tsm1v5kAfKCTyl66KzLQG2ZqXX0ADM0zDm1RT51dlcAYHSa0rY8+S5xLrx5BMtDMIIsAZufsSlWQRRAOIq47RI7flzdKaQB42yFy2zwgKxUQTi3OOmRWBVkFYakQjYck1B4NsgpgvrMrX5XMa2UrdJC2zyGzMstk2uj4NMLwIKsAOurbKvTCzDvGyQQIX4+5/6oxL8gqgErgC4fMgiCrIBzXzNTRv3wW6OsCe39dCiBsxD7XnZEWdWNmyQiAvsCnOteSUWfnIMsgHEJM0Z2RBq1aq4Oi9R//AtSf1lq8UajnAAAAAElFTkSuQmCC"
             alt="debian">
    {/if}

    <span>{$t('download.btn')}</span>
</Button>